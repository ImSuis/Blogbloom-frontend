{"ast":null,"code":"var _jsxFileName = \"/Users/suyash/frontend-31a-ImSuis/src/components/SingleBlogPost.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { toast } from \"react-toastify\";\nimport { deleteBlogApi, getCommentsApi, getSingleBlogApi, postCommentApi } from '../api/Api';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SingleBlogPost = ({\n  blogId,\n  loggedInUserId\n}) => {\n  _s();\n  const [blog, setBlog] = useState(null);\n  const [comments, setComments] = useState([]);\n  const [replyingTo, setReplyingTo] = useState(null);\n  const [commenting, setCommenting] = useState(false);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const blogResponse = await getSingleBlogApi(blogId);\n        setBlog(blogResponse.data.blog);\n        const commentsResponse = await getCommentsApi(blogId);\n        setComments(commentsResponse.data.comments);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchData();\n  }, [blogId]);\n  if (!blog) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 16\n    }, this);\n  }\n  const handleCommentIconClick = () => {\n    setCommenting(!commenting);\n  };\n  const handleCommentSubmit = async () => {\n    const commentContent = document.getElementById('commentInput').value;\n    try {\n      await postCommentApi(blogId, {\n        content: commentContent\n      });\n      const commentsResponse = await getCommentsApi(blogId);\n      setComments(commentsResponse.data.comments);\n      document.getElementById('commentInput').value = '';\n      setCommenting(false);\n      toast.success(\"Comment posted successfully.\");\n    } catch (error) {\n      console.error('Error posting comment:', error);\n    }\n  };\n  const handleReplySubmit = async (parentCommentId, replyContent) => {\n    try {\n      await postCommentApi(blogId, {\n        content: replyContent,\n        parentComment: parentCommentId\n      });\n      const commentsResponse = await getCommentsApi(blogId);\n      setComments(commentsResponse.data.comments);\n      setReplyingTo(null);\n      toast.success(\"Reply posted successfully.\");\n    } catch (error) {\n      toast.error(\"Error posting reply.\");\n      console.error('Error posting reply:', error);\n    }\n  };\n  const handleDeleteBlog = async () => {\n    try {\n      await deleteBlogApi(blogId);\n      // Add functionality to redirect to a different page after successful deletion if needed\n      toast.success(\"Blog deleted successfully.\");\n    } catch (error) {\n      console.error('Error deleting blog:', error);\n      toast.error(\"You are not authorized to delete this blog.\");\n    }\n  };\n  const handleEditBlog = () => {\n    // Add functionality to navigate to the edit page for this blog\n    // This could be done using React Router or any navigation library\n  };\n  const renderComments = (comments, renderedIds = new Set()) => {\n    // Function body remains the same as provided in the previous response\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-10 offset-md-1\",\n        children: [blog.user._id === loggedInUserId && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"edit-delete-icons\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-pencil-fill\",\n            onClick: handleEditBlog\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-trash-fill\",\n            onClick: handleDeleteBlog\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: blog.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"small text-muted mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Author:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-grey\",\n            children: `${blog.user.firstName || 'Unknown'} ${blog.user.lastName || 'Unknown'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"small text-muted mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-grey\",\n            children: moment(blog.createdAt).format('MMMM Do YYYY, h:mm a')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n_s(SingleBlogPost, \"25wYlOIB0yReXiVz56Jbuh7+U/Y=\");\n_c = SingleBlogPost;\nexport default SingleBlogPost;\nvar _c;\n$RefreshReg$(_c, \"SingleBlogPost\");","map":{"version":3,"names":["React","useEffect","useState","toast","deleteBlogApi","getCommentsApi","getSingleBlogApi","postCommentApi","moment","jsxDEV","_jsxDEV","SingleBlogPost","blogId","loggedInUserId","_s","blog","setBlog","comments","setComments","replyingTo","setReplyingTo","commenting","setCommenting","fetchData","blogResponse","data","commentsResponse","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","handleCommentIconClick","handleCommentSubmit","commentContent","document","getElementById","value","content","success","handleReplySubmit","parentCommentId","replyContent","parentComment","handleDeleteBlog","handleEditBlog","renderComments","renderedIds","Set","className","user","_id","onClick","title","firstName","lastName","createdAt","format","_c","$RefreshReg$"],"sources":["/Users/suyash/frontend-31a-ImSuis/src/components/SingleBlogPost.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { toast } from \"react-toastify\";\nimport { deleteBlogApi, getCommentsApi, getSingleBlogApi, postCommentApi } from '../api/Api';\nimport moment from 'moment';\n\nconst SingleBlogPost = ({ blogId, loggedInUserId }) => {\n    const [blog, setBlog] = useState(null);\n    const [comments, setComments] = useState([]);\n    const [replyingTo, setReplyingTo] = useState(null);\n    const [commenting, setCommenting] = useState(false);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const blogResponse = await getSingleBlogApi(blogId);\n                setBlog(blogResponse.data.blog);\n\n                const commentsResponse = await getCommentsApi(blogId);\n                setComments(commentsResponse.data.comments);\n            } catch (error) {\n                console.error('Error fetching data:', error);\n            }\n        };\n\n        fetchData();\n    }, [blogId]);\n\n    if (!blog) {\n        return <div>Loading...</div>;\n    }\n\n    const handleCommentIconClick = () => {\n        setCommenting(!commenting);\n    };\n\n    const handleCommentSubmit = async () => {\n        const commentContent = document.getElementById('commentInput').value;\n\n        try {\n            await postCommentApi(blogId, { content: commentContent });\n            const commentsResponse = await getCommentsApi(blogId);\n            setComments(commentsResponse.data.comments);\n            document.getElementById('commentInput').value = '';\n            setCommenting(false);\n            toast.success(\"Comment posted successfully.\");\n        } catch (error) {\n            console.error('Error posting comment:', error);\n        }\n    };\n\n    const handleReplySubmit = async (parentCommentId, replyContent) => {\n        try {\n            await postCommentApi(blogId, { content: replyContent, parentComment: parentCommentId });\n            const commentsResponse = await getCommentsApi(blogId);\n            setComments(commentsResponse.data.comments);\n            setReplyingTo(null);\n            toast.success(\"Reply posted successfully.\");\n        } catch (error) {\n            toast.error(\"Error posting reply.\");\n            console.error('Error posting reply:', error);\n        }\n    };\n\n    const handleDeleteBlog = async () => {\n        try {\n            await deleteBlogApi(blogId);\n            // Add functionality to redirect to a different page after successful deletion if needed\n            toast.success(\"Blog deleted successfully.\");\n        } catch (error) {\n            console.error('Error deleting blog:', error);\n            toast.error(\"You are not authorized to delete this blog.\");\n        }\n    };\n\n    const handleEditBlog = () => {\n        // Add functionality to navigate to the edit page for this blog\n        // This could be done using React Router or any navigation library\n    };\n\n    const renderComments = (comments, renderedIds = new Set()) => {\n        // Function body remains the same as provided in the previous response\n    };\n\n    return (\n        <div className=\"container\">\n            <div className=\"row\">\n                <div className=\"col-md-10 offset-md-1\">\n                    {/* Edit and delete icons */}\n                    {blog.user._id === loggedInUserId && (\n                        <div className=\"edit-delete-icons\">\n                            <i className=\"bi bi-pencil-fill\" onClick={handleEditBlog}></i>\n                            <i className=\"bi bi-trash-fill\" onClick={handleDeleteBlog}></i>\n                        </div>\n                    )}\n                    <h2>{blog.title}</h2>\n                    <p className=\"small text-muted mb-2\">\n                        <strong>Author:</strong>{' '}\n                        <span className=\"text-grey\">{`${blog.user.firstName || 'Unknown'} ${blog.user.lastName || 'Unknown'}`}</span>\n                    </p>\n                    <p className=\"small text-muted mb-4\">\n                        <strong>Date:</strong>{' '}\n                        <span className=\"text-grey\">{moment(blog.createdAt).format('MMMM Do YYYY, h:mm a')}</span>\n                    </p>\n                </div>\n            </div>\n            {/* Remaining JSX code for displaying blog content and comments */}\n        </div>\n    );\n};\n\nexport default SingleBlogPost;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}